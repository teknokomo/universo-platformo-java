# Чеклист соответствия архитектуре

**Назначение**: Проверить, что все изменения кода соответствуют Конституции Принцип I (Архитектура пакетов монорепозитория - БЕЗУСЛОВНЫЙ)

**Справка**: `.specify/memory/constitution.md` - Принцип I  
**Источник паттерна**: [Universo Platformo React](https://github.com/teknokomo/universo-platformo-react) (32+ модульных пакета)

## Критические требования (должны быть выполнены)

### 1. Расположение пакетов ✅

- [ ] Весь новый функционал находится в директории `packages/`
- [ ] Код функционала не существует в корне репозитория
- [ ] Код функционала не существует в директории `.specify/`
- [ ] Код функционала не существует в директории `.github/` (кроме инфраструктуры workflow)
- [ ] В корне разрешены только файлы: `pom.xml`, `README.md`, `README-RU.md`, `.gitignore`, документация

**Почему**: Код функционала ДОЛЖЕН быть модульным для возможности будущего извлечения в отдельные репозитории.

### 2. Разделение фронтенда/бэкенда ✅

- [ ] Код фронтенда находится в пакетах с суффиксом `-frt` (например, `packages/clusters-frt/`)
- [ ] Код бэкенда находится в пакетах с суффиксом `-srv` (например, `packages/clusters-srv/`)
- [ ] Нет смешивания кода фронтенда и бэкенда в одном пакете
- [ ] Каждый пакет имеет четкую цель и ответственность

**Почему**: Четкое разделение позволяет независимое развертывание и масштабирование фронтенда/бэкенда.

### 3. Структура папки Base ✅

- [ ] Каждый пакет содержит папку `base/` на корневом уровне
- [ ] Код реализации находится внутри директории `base/`
- [ ] Структура пакета: `packages/{feature}-{frt|srv}/base/src/`
- [ ] POM-файл существует как на уровне пакета, так и на уровне `base/`

**Почему**: Папка `base/` поддерживает будущие множественные реализации одного и того же функционала.

### 4. Соглашения об именовании пакетов ✅

- [ ] Имена пакетов следуют паттерну: `{feature}-{frt|srv}`
- [ ] Имя функционала в нижнем регистре, через дефис (например, `clusters`, `user-profile`)
- [ ] Суффикс либо `-frt` (фронтенд), либо `-srv` (бэкенд)
- [ ] Имена пакетов описательны и самоочевидны
- [ ] Нет неоднозначных или общих имен (избегайте `common`, `shared`, `utils` как имен пакетов)

**Почему**: Последовательное именование обеспечивает легкую навигацию и понимание кодовой базы.

### 5. Именование Java-пакетов ✅

- [ ] Java-пакеты следуют соглашению: `pro.universo.{feature}.{layer}`
- [ ] Бэкенд использует пространство имен `pro.universo.{feature}.api.*`
- [ ] Фронтенд использует пространство имен `pro.universo.{feature}.ui.*`
- [ ] Структура слоев следует: controller, service, repository, model, dto и т.д.
- [ ] Нет нарушений соглашений об именовании пакетов Java

**Почему**: Стандартные соглашения Java обеспечивают поддержку инструментов и знакомство разработчиков.

## Дополнительная проверка

### 6. Конфигурация модулей Maven ✅

- [ ] Корневой `pom.xml` объявляет новые пакеты в секции `<modules>`
- [ ] Каждый пакет имеет собственный `pom.xml` с правильной ссылкой на родителя
- [ ] Зависимости правильно объявлены (нет циклических зависимостей)
- [ ] Номера версий управляются через родительский POM (паттерн BOM)
- [ ] Сборка выполняется успешно: `mvn clean install`

**Почему**: Правильная конфигурация Maven обеспечивает возможность сборки и управление зависимостями.

### 7. Автономность пакета ✅

- [ ] Пакет имеет минимальные зависимости от других пакетов
- [ ] Связанность между пакетами обоснована и задокументирована
- [ ] Пакет можно понять независимо
- [ ] Пакет имеет четкую границу API (публичные интерфейсы)
- [ ] Детали внутренней реализации не раскрываются

**Почему**: Автономные пакеты легче извлечь в отдельные репозитории.

### 8. Двуязычная документация ✅

- [ ] Каждый пакет имеет `README.md` (английский)
- [ ] Каждый пакет имеет `README-RU.md` (русский)
- [ ] Оба файла README имеют идентичную структуру и количество строк
- [ ] README документируют назначение пакета, зависимости и использование
- [ ] README обновляются атомарно с изменениями кода

**Почему**: Конституция Принцип II (Двуязычная документация - БЕЗУСЛОВНЫЙ).

## Соответствие паттернам

### 9. Соответствие React-репозиторию ✅

- [ ] Структура пакета отражает паттерны React-репозитория, где применимо
- [ ] Адаптации паттернов React документированы с обоснованием
- [ ] Паттерн трехуровневых сущностей соблюдается, если применимо (Первичная/Вторичная/Третичная)
- [ ] Отклонения от стандартных паттернов обоснованы в спецификации

**Почему**: Конституция Принцип VIII (Соответствие React-репозиторию - БЕЗУСЛОВНЫЙ).

### 10. Готовность к будущему извлечению ✅

- [ ] Пакет теоретически можно переместить в отдельный репозиторий
- [ ] Все зависимости явно объявлены
- [ ] Нет скрытых зависимостей от специфичной для репозитория инфраструктуры
- [ ] Версией пакета можно управлять независимо
- [ ] У пакета есть четкая стратегия релиза/развертывания

**Почему**: Пакеты в конечном итоге будут извлечены по мере развития платформы.

## Решение по ревью

**Критерии прохождения**: Все пункты в разделах 1-5 ДОЛЖНЫ быть отмечены. Пункты в разделах 6-10 НАСТОЯТЕЛЬНО РЕКОМЕНДУЮТСЯ.

**Решение рецензента**:
- [ ] ✅ УТВЕРЖДЕНО - Полное соответствие требованиям модульной архитектуры
- [ ] ⚠️ УТВЕРЖДЕНО С ПРИМЕЧАНИЯМИ - Незначительные проблемы задокументированы, будут решены в последующих задачах
- [ ] ❌ ОТКЛОНЕНО - Нарушения архитектуры должны быть исправлены перед слиянием

**Примечания рецензента**:
```
[Задокументируйте любые проблемы, исключения или последующие пункты здесь]
```

## Обеспечение исполнения

Конституция утверждает:

> **ЗАПРЕТ**: Функционал НЕ ДОЛЖЕН быть реализован вне структуры директории `packages/`. Общие инфраструктурные файлы (конфигурация сборки, корневая документация, CI/CD workflow) являются исключением, но ВЕСЬ код функционала ДОЛЖЕН находиться в соответствующих пакетах. Создание функционала вне этой структуры нарушает конституцию проекта и будет отклонено при code review.

**Это БЕЗУСЛОВНО**. Рецензенты ДОЛЖНЫ отклонять PR, нарушающие требования модульной архитектуры.

## Справочные материалы

- **Конституция**: `.specify/memory/constitution.md` - Принцип I
- **Перевод паттернов**: `.specify/memory/react-to-java-patterns.md`
- **Анализ архитектуры**: `.specify/memory/react-architecture-analysis.md`
- **React-справка**: https://github.com/teknokomo/universo-platformo-react
- **Документ аудита**: `.specify/memory/modular-architecture-audit.md`

## Команды быстрой проверки

```bash
# Проверить структуру пакетов
ls -la packages/

# Проверить отсутствие Java-кода в корне
find . -maxdepth 1 -name "*.java" | wc -l  # Должно быть 0

# Проверить модули Maven
grep -A 20 "<modules>" pom.xml

# Проверить существование папок base
find packages/ -type d -name "base" | wc -l  # Должно равняться количеству пакетов

# Проверка сборки
mvn clean install -DskipTests
```

---

**Последнее обновление**: 2025-11-17  
**Версия Конституции**: 2.1.0
